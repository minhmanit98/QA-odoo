<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="portal.frontend_layout" name="Main Frontend Layout" inherit_id="web.frontend_layout">
        <xpath expr="//div[@id='wrapwrap']" position="attributes">
            <attribute name="t-attf-class" add="#{request.env['res.lang']._lang_get(request.env.lang).direction == 'rtl' and 'o_rtl' or ''}" separator=" "/>
            <attribute name="t-attf-class" add="#{'o_portal' if is_portal else ''}" separator=" "/>
        </xpath>
        <xpath expr="//div[@id='wrapwrap']/header/img" position="replace">
            <nav class="nav navbar navbar-expand-md" id="nav">
                <div class="container">
                    <a href="/" class="navbar-brand logo">
                        <img t-att-src="'/logo.png?company=%s' % res_company.id" t-att-alt="'Logo of %s' % res_company.name" t-att-title="res_company.name"/>
                    </a>
                    <a href="/" class="navbar-brand logo logo-min">
                        <img t-att-src="'/logo.png'" t-att-alt="'Logo of %s' % res_company.name" t-att-title="res_company.name"/>
                    </a>
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#top_menu_collapse">
                        <span class="navbar-toggler-icon"/>
                    </button>
                    <div class="collapse navbar-collapse main_list" id="top_menu_collapse">
                        <!-- FIXME We want menu to open to the right by default (except cases handled in JS) -->
                        <ul class="nav navbar-nav ml-auto text-right" id="top_menu">
                            <li class="nav-item divider" t-ignore="true" t-if="not user_id._is_public()"/>
                            <li class="nav-item dropdown" t-ignore="true" t-if="not user_id._is_public()">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
                                    <b>
                                        <span t-esc="user_id.name[:23] + '...' if user_id.name and len(user_id.name) &gt; 25 else user_id.name"/>
                                    </b>
                                </a>
                                <div class="dropdown-menu js_usermenu" role="menu">
                                    <a id="o_logout" class="dropdown-item" t-attf-href="/web/session/logout?redirect=/" role="menuitem">Logout</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <nav class="navbar navbar-expand-md navbar-fixed" id="nav-min">
                <div class="container-fluid">
                    <!-- Nav Header -->
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#"><span class="fa fa-home"></span><span class="link"> Home</span></a>
                        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#collapse-1">
                            <span class="navbar-toggler-icon"/>
                        </button>
                    </div>
                    <!-- Nav Collapse -->
                    <div class="navbar-collapse collapse" id="collapse-1">
                        <!-- Nav Left -->
                        <ul class="nav navbar-nav">
                            <!-- Products -->
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                    <span class="fa fa-foursquare"></span><span class="link"> Forum</span> <span class="fa fa-caret-down"></span></a>
                                <ul class="dropdown-menu">
                                    <li><a href="#"><span class="fa fa-foursquare"></span> Forum 1</a></li>
                                    <li><a href="#"><span class="fa fa-foursquare"></span> Forum 2</a></li>
                                </ul>
				            </li>
                            <!-- Services -->
                            <li class="dropdown">
					            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                    <span class="fa fa-comments"></span>
                                    <span class="link"> Live Support</span>
                                    <span class="fa fa-caret-down"></span>
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a href="#"><span class="fa fa-comments"></span> Live Support 1</a></li>
                                    <li><a href="#"><span class="fa fa-comments"></span> Live Support 2</a></li>
                                    <li><a href="#"><span class="fa fa-comments"></span> Live Support 3</a></li>
                                </ul>
                            </li>
                            <!-- About -->
                            <li><a class="nav-link" href="#"><span class="fa fa-info-circle"></span><span class="link"> Contact us</span></a></li>
                            <!-- Contact -->
<!--                            <li><a href="#"><span class="fa fa-phone"></span><span class="link"> Contact us</span></a></li>-->
                        </ul>
                        <!-- Nav Right -->
                        <form class="navbar-form navbar-right ml-auto text-right">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search"/>
                            </div>
                            <button type="submit" class="btn"><span class="fa fa-search"></span></button>
                        </form>
                    </div>
                </div>
            </nav>
        </xpath>
        <xpath expr="//div[@id='wrapwrap']/main/t[@t-raw='0']" position="before">
            <div t-if="o_portal_fullwidth_alert" class="alert alert-info alert-dismissible rounded-0 fade show d-print-none css_editable_mode_hidden">
                <div class="container">
                    <t t-raw="o_portal_fullwidth_alert"/>
                </div>
            </div>
        </xpath>
    </template>

     <template id="portal.my_account_link" name="Link to frontend portal" inherit_id="portal.frontend_layout">
        <xpath expr="//a[@id='o_logout']" position="before">
            <a href="/my/account/password" role="menuitem" class="dropdown-item">Change Password</a>
            <a t-attf-href="/profile/user/#{uid}" role="menuitem" class="dropdown-item">My Account</a>
        </xpath>
    </template>

    <template id="utc2_password">
        <t t-call="portal.portal_layout">
            <t t-set="additional_title">Change Password</t>
            <form action="/my/account/password" method="post">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                <div class="row o_portal_details">
                    <div class="col-lg-8">
                        <div class="row">
                            <div class="col-lg-12">
                              <div t-if="error_message" class="alert alert-danger" role="alert">
                                  <t t-foreach="error_message" t-as="err"><t t-esc="err"/><br /></t>
                              </div>
                            </div>
                            <div t-attf-class="form-group #{error.get('email') and 'o_has_error' or ''} col-xl-12">
                                <label class="col-form-label" for="email">Old Password</label>
                                <input type="password" name="old_pwd" id="old_pwd" required="required" autocomplete="current-password" maxlength="4096" class="form-control "/>
                            </div>
                            <div t-attf-class="form-group #{error.get('email') and 'o_has_error' or ''} col-xl-12">
                                <label class="col-form-label" for="email">New Password</label>
                                <input type="password" name='new_password' id="new_password" class="form-control" required="required" minlength="8"/>
                            </div>
                            <div t-attf-class="form-group #{error.get('email') and 'o_has_error' or ''} col-xl-12">
                                <label class="col-form-label" for="email">Confirm New Password</label>
                                <input type="password" name='confirm_pwd' id="confirm_pwd" required="required" autocomplete="current-password" maxlength="4096" class="form-control "/>
                            </div>
                            <input type="hidden" name="redirect" t-att-value="redirect"/>
                        </div>
                        <div class="clearfix">
                            <button type="submit" class="btn btn-primary float-right mb32 ">
                                Confirm
                                <span class="fa fa-long-arrow-right" />
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </t>
    </template>

</odoo>